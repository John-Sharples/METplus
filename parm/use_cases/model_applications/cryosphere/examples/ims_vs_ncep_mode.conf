# IMS Ice Concentration (fcst) vs. NCEP Ice Concentration (obs)
# IMS and NCEP are both observation analyses. For the purpose of 
# running MET, IMS is referred to as the forecast and NCEP as the obs.
# Written by Lindsay Blank, NCAR. January 2020
[config]

# Loop by analysis time
LOOP_BY = VALID

# Format of INIT_BEG and INIT_END
VALID_TIME_FMT = %Y%m%d

# Start time for METplus run
VALID_BEG=20190201

# End time for METplus run
VALID_END=20190202

# Increment between METplus runs in seconds. Must be >= 60
VALID_INCREMENT=86400

# Options are times, processes
# times = run all items in the PROCESS_LIST for a single initialization
# time, then repeat until all times have been evaluated.
# processes = run each item in the PROCESS_LIST for all times
# specified, then repeat for the next item in the PROCESS_LIST.
LOOP_ORDER = times

# List of applications to run
PROCESS_LIST = Mode

# MODE configurations

# turn on quilting
MODE_QUILT = True

# convolution radius list
MODE_CONV_RADIUS = 10, 20, 30, 40, 50

# Convolution threshold list
#L: IMS is a binary field where a value of "1" is equivalent to >=0.40 ice concentration..
FCST_MODE_CONV_THRESH = ==1.00
OBS_MODE_CONV_THRESH = >=0.40

# Merge flag: options are NONE, THRESH, ENGINE, or BOTH
MODE_MERGE_FLAG = NONE

# Merge threshold list
MODE_MERGE_THRESH = >=1.25

# List of variables to compare
FCST_VAR1_NAME = ICEC
FCST_VAR1_LEVELS = Z0

OBS_VAR1_NAME = ICEC
OBS_VAR1_LEVELS = Z0

# Description of data to be processed
# used in output file path
MODEL = IMS
OBTYPE = NCEP

# Location of mode MET config file
MODE_CONFIG = {CONFIG_DIR}/MODEConfig_IMS_vs_NCEP

# IMS Options:
# Set to true if forecast data is probabilistic
FCST_IS_PROB = false

# NCEP Options:

[dir]
# location of configuration files used by MET applications
CONFIG_DIR={PARM_BASE}/use_cases/sea_ice/met_config

# input and output data directories for each application in PROCESS_LIST
OBS_MODE_INPUT_DIR = {INPUT_BASE}/test_data/NCEP_data
FCST_MODE_INPUT_DIR = {INPUT_BASE}/test_data/IMS_data

MODE_OUTPUT_DIR = {OUTPUT_BASE}/met_out/sea_ice

[filename_templates]
# format of filenames

# IMS
FCST_MODE_INPUT_TEMPLATE = imssnow96.{valid?fmt=%Y%m%d}.grb.grib2

# NCEP
OBS_MODE_INPUT_TEMPLATE = seaice.t00z.north12psg.grib2.{valid?fmt=%Y%m%d}

MODE_OUTPUT_TEMPLATE = {valid?fmt=%Y%m%d}/mode
